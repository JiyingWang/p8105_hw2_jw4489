p8105_hw2_jw4489
================
2023-10-04

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

\##Problem 1

``` r
pols_month_df = 
  read_csv("p1data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.numeric(year),
    president = ifelse(
      prez_gop > prez_dem, "gop", "dem"
    )
  ) |> 
  select(-day, -prez_gop, -prez_dem)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_df
```

    ## # A tibble: 822 × 9
    ##     year month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <dbl> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ##  1  1947 January        23      51     253      23      45     198 dem      
    ##  2  1947 February       23      51     253      23      45     198 dem      
    ##  3  1947 March          23      51     253      23      45     198 dem      
    ##  4  1947 April          23      51     253      23      45     198 dem      
    ##  5  1947 May            23      51     253      23      45     198 dem      
    ##  6  1947 June           23      51     253      23      45     198 dem      
    ##  7  1947 July           23      51     253      23      45     198 dem      
    ##  8  1947 August         23      51     253      23      45     198 dem      
    ##  9  1947 September      23      51     253      23      45     198 dem      
    ## 10  1947 October        23      51     253      23      45     198 dem      
    ## # ℹ 812 more rows

``` r
snp_df = 
  read_csv("p1data/snp.csv") |>
  janitor::clean_names() |> 
  mutate(
    date = format(as.Date(date, format = "%m/%d/%y"), "%Y/%m/%d")
  ) |> 
  separate(date, into = c("year", "month", "day"), sep = "/") |> 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.numeric(year)) |>
  arrange(year, month) |>
  relocate(year, month, everything())
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df
```

    ## # A tibble: 787 × 4
    ##     year month    day   close
    ##    <dbl> <chr>    <chr> <dbl>
    ##  1  1969 April    01    104. 
    ##  2  1969 August   01     95.5
    ##  3  1969 December 01     92.1
    ##  4  1969 February 03     98.1
    ##  5  1969 January  02    103. 
    ##  6  1969 July     01     91.8
    ##  7  1969 June     02     97.7
    ##  8  1969 March    03    102. 
    ##  9  1969 May      01    103. 
    ## 10  1969 November 03     93.8
    ## # ℹ 777 more rows

``` r
unemployment_df = 
  read_csv("p1data/unemployment.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment"
  ) |>
  arrange(year, month)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df
```

    ## # A tibble: 816 × 3
    ##     year month unemployment
    ##    <dbl> <chr>        <dbl>
    ##  1  1948 apr            3.9
    ##  2  1948 aug            3.9
    ##  3  1948 dec            4  
    ##  4  1948 feb            3.8
    ##  5  1948 jan            3.4
    ##  6  1948 jul            3.6
    ##  7  1948 jun            3.6
    ##  8  1948 mar            4  
    ##  9  1948 may            3.5
    ## 10  1948 nov            3.8
    ## # ℹ 806 more rows

``` r
merged_df = left_join(pols_month_df,snp_df, by = c("year", "month")) |> 
  left_join(unemployment_df, by = c("year", "month"))

merged_df
```

    ## # A tibble: 822 × 12
    ##     year month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president day  
    ##    <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <chr>
    ##  1  1947 January      23      51     253      23      45     198 dem       <NA> 
    ##  2  1947 Februa…      23      51     253      23      45     198 dem       <NA> 
    ##  3  1947 March        23      51     253      23      45     198 dem       <NA> 
    ##  4  1947 April        23      51     253      23      45     198 dem       <NA> 
    ##  5  1947 May          23      51     253      23      45     198 dem       <NA> 
    ##  6  1947 June         23      51     253      23      45     198 dem       <NA> 
    ##  7  1947 July         23      51     253      23      45     198 dem       <NA> 
    ##  8  1947 August       23      51     253      23      45     198 dem       <NA> 
    ##  9  1947 Septem…      23      51     253      23      45     198 dem       <NA> 
    ## 10  1947 October      23      51     253      23      45     198 dem       <NA> 
    ## # ℹ 812 more rows
    ## # ℹ 2 more variables: close <dbl>, unemployment <dbl>

The `pols-month` dataset contains 822 and 9 columns. It contains various
variables including `year`, `month`, `gov_gop`, `sen_gop`, `rep_gop`,
`gov_dem`, `sen_dem`, `rep_dem`, `president`. The range is 1947 to 2015.

The `snp` dataset contains 787 rows and 4 columns. It contains `year`,
`month`, `close`. The range is 1969 to 2068.

The `unemployment` dataset contains 816 rows and 3 columns. It contains
`year`, `month`, `unemployment`. The range is 1948 to 2015.

The merged dataset `merged_df` contains 822 observations and 12. It
contains various variables including `year`, `month`, `gov_gop`,
`sen_gop`, `rep_gop`, `gov_dem`, `sen_dem`.

\##Problem 2

``` r
trash_wheel_df = 
  read_excel("p2data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel") |> 
  janitor::clean_names() |>
  drop_na(dumpster) |> 
  select(dumpster:homes_powered)|> 
  mutate(
    homes_powered = (weight_tons * 500) / 30,
    name = "Mr. Trash Wheel",
    year = as.numeric(year)
  )
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
trash_wheel_df
```

    ## # A tibble: 584 × 15
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
    ## # ℹ 574 more rows
    ## # ℹ 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>, name <chr>

``` r
prof_df = 
  read_excel("p2data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Professor Trash Wheel") |> 
  janitor::clean_names() |>
  drop_na(dumpster) |> 
  mutate(
    homes_powered = (weight_tons * 500) / 30,
    name = "Professor Trash Wheel",
    year = as.numeric(year)
  )

prof_df
```

    ## # A tibble: 106 × 14
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ##  2        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ##  3        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ##  4        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ##  5        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ##  6        6 March     2017 2017-03-30 00:00:00        1.71                 15
    ##  7        7 April     2017 2017-04-01 00:00:00        1.82                 15
    ##  8        8 April     2017 2017-04-20 00:00:00        2.37                 15
    ##  9        9 May       2017 2017-05-10 00:00:00        2.64                 15
    ## 10       10 May       2017 2017-05-26 00:00:00        2.78                 15
    ## # ℹ 96 more rows
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, homes_powered <dbl>, name <chr>

``` r
gwynnda_df = 
  read_excel("p2data/202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Gwynnda Trash Wheel") |> 
  janitor::clean_names() |>
  drop_na(dumpster) |> 
  mutate(
    homes_powered = (weight_tons*500)/30,
    name = "Gwynnda Trash Wheel",
    year = as.numeric(year)
  )

gwynnda_df
```

    ## # A tibble: 155 × 13
    ##    dumpster month   year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>  <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 July    2021 2021-07-03 00:00:00        0.93                 15
    ##  2        2 July    2021 2021-07-07 00:00:00        2.26                 15
    ##  3        3 July    2021 2021-07-07 00:00:00        1.62                 15
    ##  4        4 July    2021 2021-07-16 00:00:00        1.76                 15
    ##  5        5 July    2021 2021-07-30 00:00:00        1.53                 15
    ##  6        6 August  2021 2021-08-11 00:00:00        2.06                 15
    ##  7        7 August  2021 2021-08-14 00:00:00        1.9                  15
    ##  8        8 August  2021 2021-08-16 00:00:00        2.16                 15
    ##  9        9 August  2021 2021-08-16 00:00:00        2.6                  15
    ## 10       10 August  2021 2021-08-17 00:00:00        3.21                 15
    ## # ℹ 145 more rows
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>, name <chr>

``` r
combined_df = bind_rows(trash_wheel_df, prof_df, gwynnda_df) |> 
  select(trash_wheel_name = "name",everything())

combined_df
```

    ## # A tibble: 845 × 15
    ##    trash_wheel_name dumpster month  year date                weight_tons
    ##    <chr>               <dbl> <chr> <dbl> <dttm>                    <dbl>
    ##  1 Mr. Trash Wheel         1 May    2014 2014-05-16 00:00:00        4.31
    ##  2 Mr. Trash Wheel         2 May    2014 2014-05-16 00:00:00        2.74
    ##  3 Mr. Trash Wheel         3 May    2014 2014-05-16 00:00:00        3.45
    ##  4 Mr. Trash Wheel         4 May    2014 2014-05-17 00:00:00        3.1 
    ##  5 Mr. Trash Wheel         5 May    2014 2014-05-17 00:00:00        4.06
    ##  6 Mr. Trash Wheel         6 May    2014 2014-05-20 00:00:00        2.71
    ##  7 Mr. Trash Wheel         7 May    2014 2014-05-21 00:00:00        1.91
    ##  8 Mr. Trash Wheel         8 May    2014 2014-05-28 00:00:00        3.7 
    ##  9 Mr. Trash Wheel         9 June   2014 2014-06-05 00:00:00        2.52
    ## 10 Mr. Trash Wheel        10 June   2014 2014-06-11 00:00:00        3.76
    ## # ℹ 835 more rows
    ## # ℹ 9 more variables: volume_cubic_yards <dbl>, plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   plastic_bags <dbl>, wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>

The `Mr. trash wheel` dataset contains 584 rows and 15 columns.

The `Professor Trash Wheel` dataset contains 106 rows and 14 columns.
For available data, the total weight of trash collected by Professor
Trash Wheel is 216.26 tons.

The `Gwynnda Trash Wheel` dataset contains 155 rows and 13 columns. For
available data, the total number of cigarette butts collected by Gwynnda
in July of 2021 is 16300.

The combined dataset contains 845 rows and 15 columns.

The datasets contains various variables, inclusing “month”, “year”,
“date”, “weight_tons”, “volume_cubic_yards”, “plastic_bottles”, and
“polystyrene”. These variables represent the characteristics of trash
collected.
